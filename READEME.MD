## **ğŸ“œ README.md - Transaction API**

# **Transaction API - ITUB3**

![Java](https://img.shields.io/badge/Java-17-blue.svg)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.4.2-brightgreen.svg)
![Docker](https://img.shields.io/badge/Docker-Supported-blue)
![Swagger](https://img.shields.io/badge/Swagger-Enabled-orange)
![Maven](https://img.shields.io/badge/Maven-Build-blue)

**Transaction API** is a RESTful API designed for managing financial transactions and providing statistical insights. The application is built using **Spring Boot**, ensuring high scalability, security, and maintainability. It supports **observability** via **Spring Actuator & Prometheus**, **security** with **Spring Security**, and is fully **containerized using Docker**.

---

## **ğŸ“Œ Features**
- âœ… **Transaction Management**: Create and delete financial transactions.
- âœ… **Statistics Calculation**: Provides aggregated statistics for transactions.
- âœ… **Health Check**: Ensures system availability.
- âœ… **Configuration Management**: Allows dynamic adjustments of statistics window.
- âœ… **Security**: Uses Spring Security for API protection.
- âœ… **Rate Limiting**: Implements request throttling using Bucket4J.
- âœ… **Observability**: Exposes monitoring endpoints via Actuator & Prometheus.
- âœ… **Swagger Documentation**: Provides interactive API documentation.

---

## **ğŸ“‚ Project Structure**
```
ğŸ“¦ itub3
 â”£ ğŸ“‚ src/main/java/com/itub/itub3
 â”ƒ â”£ ğŸ“‚ application
 â”ƒ â”ƒ â”£ ğŸ“‚ dto  # Data Transfer Objects (DTOs)
 â”ƒ â”ƒ â”ƒ â”£ TransactionRequestDTO.java
 â”ƒ â”ƒ â”ƒ â”— StatisticsResponseDTO.java
 â”ƒ â”ƒ â”— ğŸ“‚ service  # Business Logic Layer
 â”ƒ â”ƒ â”ƒ â”£ TransactionService.java
 â”ƒ â”ƒ â”ƒ â”— ConfigurationService.java
 â”ƒ â”£ ğŸ“‚ infrastructure
 â”ƒ â”ƒ â”£ ğŸ“‚ config  # Configuration Classes
 â”ƒ â”ƒ â”ƒ â”£ CorsConfig.java
 â”ƒ â”ƒ â”ƒ â”£ SwaggerConfig.java
 â”ƒ â”ƒ â”ƒ â”— SecurityConfig.java
 â”ƒ â”ƒ â”£ ğŸ“‚ security  # Security and Rate Limiting
 â”ƒ â”ƒ â”ƒ â”£ RateLimitingFilter.java
 â”ƒ â”ƒ â”ƒ â”— SecurityConfig.java
 â”ƒ â”£ ğŸ“‚ interfaces
 â”ƒ â”ƒ â”— ğŸ“‚ controller  # API Controllers
 â”ƒ â”ƒ â”ƒ â”£ HomeController.java
 â”ƒ â”ƒ â”ƒ â”£ TransactionController.java
 â”ƒ â”ƒ â”ƒ â”£ ConfigurationController.java
 â”ƒ â”ƒ â”ƒ â”— HealthCheckController.java
 â”£ ğŸ“‚ src/main/resources
 â”ƒ â”£ application.properties
 â”ƒ â”— logback-spring.xml
 â”£ ğŸ“œ Dockerfile
 â”£ ğŸ“œ pom.xml
 â”— ğŸ“œ README.md
```

---

## **ğŸ“Œ API Controllers**
### **1ï¸âƒ£ HomeController**
- **`GET /`** â†’ Returns a basic success message: `"API Itub3 successfully running!"`

### **2ï¸âƒ£ TransactionController**
- **`POST /transactions`** â†’ Creates a new transaction.
- **`DELETE /transactions`** â†’ Deletes all transactions.
- **`GET /statistics`** â†’ Retrieves statistical data based on stored transactions.

### **3ï¸âƒ£ ConfigurationController**
- **`PATCH /config/statistics-window?seconds={value}`** â†’ Updates the statistics window size.
- **`GET /config/statistics-window`** â†’ Returns the current statistics window size.

### **4ï¸âƒ£ HealthCheckController**
- **`GET /health`** â†’ Returns `"API is running"` to verify service availability.

---

## **ğŸ“Œ Services**
### **TransactionService**
- **Registers** transactions.
- **Calculates** statistics like sum, average, max, min, and count.
- **Handles** transaction deletions.

### **ConfigurationService**
- **Manages** statistics window time dynamically.

---

## **ğŸ“Œ Configuration Files**
### **1ï¸âƒ£ `application.properties`**
Defines:
- Server port
- Logging levels
- Observability configurations
- Security & application settings

### **2ï¸âƒ£ `logback-spring.xml`**
Handles **log formatting** and levels for different environments.

### **3ï¸âƒ£ `SwaggerConfig.java`**
Configures **Swagger OpenAPI documentation**.

### **4ï¸âƒ£ `SecurityConfig.java`**
Manages **Spring Security**, including:
- Disabling CSRF for APIs.
- Allowing unrestricted access to Swagger endpoints.

### **5ï¸âƒ£ `CorsConfig.java`**
Configures **CORS settings** to allow cross-origin requests.

---

## **ğŸ“Œ Observability & Logging**
- **Spring Boot Actuator** provides:
    - `/actuator/health` â†’ System health check.
    - `/actuator/metrics` â†’ Application metrics.
    - `/actuator/prometheus` â†’ Metrics in Prometheus format.

---

## **ğŸ“Œ API Documentation (Swagger)**
- **Access Swagger UI:** [`http://localhost:8080/swagger-ui.html`](http://localhost:8080/swagger-ui.html)
- **API JSON Documentation:** [`http://localhost:8080/v3/api-docs`](http://localhost:8080/v3/api-docs)

---

## **ğŸ“Œ Containerization (Docker)**
### **1ï¸âƒ£ Dockerfile**
```dockerfile
FROM openjdk:17-jdk-slim
WORKDIR /app
COPY target/itub3-0.0.1-SNAPSHOT.jar app.jar
ENTRYPOINT ["java", "-jar", "app.jar"]
EXPOSE 8080
```

### **2ï¸âƒ£ Build & Run**
```sh
# Build the project
mvn clean package -DskipTests

# Build the Docker image
docker build -t itub3-app .

# Run the container
docker run -d -p 8080:8080 --name itub3-container itub3-app
```

### **3ï¸âƒ£ Stop & Remove Container**
```sh
docker stop itub3-container
docker rm itub3-container
docker rmi itub3-app
```

---

## **ğŸ“Œ How to Clone and Run Locally**
### **1ï¸âƒ£ Clone the Repository**
```sh
git clone https://github.com/YOUR_USERNAME/itub3.git
cd itub3
```

### **2ï¸âƒ£ Build the Project**
```sh
mvn clean install -DskipTests
```

### **3ï¸âƒ£ Run the Application**
```sh
mvn spring-boot:run
```

### **4ï¸âƒ£ Run in Docker**
```sh
docker build -t itub3-app .
docker run -d -p 8080:8080 --name itub3-container itub3-app
```

---

## **ğŸ“Œ Testing**
### **Run Unit Tests**
```sh
mvn test
```

---

## **ğŸ“Œ Author & License**
ğŸ‘¤ **Saulo Capistrano**  
ğŸ“§ Contact: `saulocapistrano@gmail.com`  
ğŸ“„ License: MIT License

---

**ğŸš€ Ready to use the API? Start exploring with Swagger!**

[`http://localhost:8080/swagger-ui.html`](http://localhost:8080/swagger-ui.html)



## **ğŸ“œ README.md - Transaction API**

# **Transaction API - ITUB3**

![Java](https://img.shields.io/badge/Java-17-blue.svg)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.4.2-brightgreen.svg)
![Docker](https://img.shields.io/badge/Docker-Suportado-blue)
![Swagger](https://img.shields.io/badge/Swagger-Habilitado-orange)
![Maven](https://img.shields.io/badge/Maven-Build-blue)

A **Transaction API** Ã© uma API RESTful projetada para gerenciar transaÃ§Ãµes financeiras e fornecer estatÃ­sticas agregadas. A aplicaÃ§Ã£o foi desenvolvida utilizando **Spring Boot**, garantindo **escalabilidade, seguranÃ§a e fÃ¡cil manutenÃ§Ã£o**.

Ela suporta **observabilidade** via **Spring Actuator & Prometheus**, possui **seguranÃ§a** com **Spring Security**, e estÃ¡ **totalmente conteinerizada com Docker**.

---

## **ğŸ“Œ Recursos**
- âœ… **Gerenciamento de TransaÃ§Ãµes**: Criar e excluir transaÃ§Ãµes financeiras.
- âœ… **CÃ¡lculo de EstatÃ­sticas**: ObtÃ©m dados agregados das transaÃ§Ãµes.
- âœ… **VerificaÃ§Ã£o de SaÃºde (Health Check)**: Garante a disponibilidade do sistema.
- âœ… **Gerenciamento de ConfiguraÃ§Ã£o**: Permite ajustes dinÃ¢micos no tempo da janela estatÃ­stica.
- âœ… **SeguranÃ§a**: ProteÃ§Ã£o da API com Spring Security.
- âœ… **Rate Limiting**: ImplementaÃ§Ã£o de controle de requisiÃ§Ãµes com Bucket4J.
- âœ… **Observabilidade**: ExposiÃ§Ã£o de mÃ©tricas via Actuator & Prometheus.
- âœ… **DocumentaÃ§Ã£o Swagger**: API documentada de forma interativa.

---

## **ğŸ“‚ Estrutura do Projeto**
```
ğŸ“¦ itub3
 â”£ ğŸ“‚ src/main/java/com/itub/itub3
 â”ƒ â”£ ğŸ“‚ application
 â”ƒ â”ƒ â”£ ğŸ“‚ dto  # Objetos de TransferÃªncia de Dados (DTOs)
 â”ƒ â”ƒ â”ƒ â”£ TransactionRequestDTO.java
 â”ƒ â”ƒ â”ƒ â”— StatisticsResponseDTO.java
 â”ƒ â”ƒ â”— ğŸ“‚ service  # Camada de LÃ³gica de NegÃ³cio
 â”ƒ â”ƒ â”ƒ â”£ TransactionService.java
 â”ƒ â”ƒ â”ƒ â”— ConfigurationService.java
 â”ƒ â”£ ğŸ“‚ infrastructure
 â”ƒ â”ƒ â”£ ğŸ“‚ config  # ConfiguraÃ§Ãµes da AplicaÃ§Ã£o
 â”ƒ â”ƒ â”ƒ â”£ CorsConfig.java
 â”ƒ â”ƒ â”ƒ â”£ SwaggerConfig.java
 â”ƒ â”ƒ â”ƒ â”— SecurityConfig.java
 â”ƒ â”ƒ â”£ ğŸ“‚ security  # SeguranÃ§a e Rate Limiting
 â”ƒ â”ƒ â”ƒ â”£ RateLimitingFilter.java
 â”ƒ â”ƒ â”ƒ â”— SecurityConfig.java
 â”ƒ â”£ ğŸ“‚ interfaces
 â”ƒ â”ƒ â”— ğŸ“‚ controller  # Controladores da API
 â”ƒ â”ƒ â”ƒ â”£ HomeController.java
 â”ƒ â”ƒ â”ƒ â”£ TransactionController.java
 â”ƒ â”ƒ â”ƒ â”£ ConfigurationController.java
 â”ƒ â”ƒ â”ƒ â”— HealthCheckController.java
 â”£ ğŸ“‚ src/main/resources
 â”ƒ â”£ application.properties
 â”ƒ â”— logback-spring.xml
 â”£ ğŸ“œ Dockerfile
 â”£ ğŸ“œ pom.xml
 â”— ğŸ“œ README.md
```

---

## **ğŸ“Œ Controladores da API**
### **1ï¸âƒ£ HomeController**
- **`GET /`** â†’ Retorna uma mensagem bÃ¡sica de sucesso: `"API Itub3 executando com sucesso!"`

### **2ï¸âƒ£ TransactionController**
- **`POST /transactions`** â†’ Cria uma nova transaÃ§Ã£o.
- **`DELETE /transactions`** â†’ Exclui todas as transaÃ§Ãµes.
- **`GET /statistics`** â†’ ObtÃ©m estatÃ­sticas agregadas das transaÃ§Ãµes.

### **3ï¸âƒ£ ConfigurationController**
- **`PATCH /config/statistics-window?seconds={value}`** â†’ Atualiza o tempo da janela estatÃ­stica.
- **`GET /config/statistics-window`** â†’ Retorna o tempo atual da janela estatÃ­stica.

### **4ï¸âƒ£ HealthCheckController**
- **`GET /health`** â†’ Retorna `"API is running"` para verificar a disponibilidade do serviÃ§o.

---

## **ğŸ“Œ ServiÃ§os**
### **TransactionService**
- **Registra** transaÃ§Ãµes.
- **Calcula** estatÃ­sticas como soma, mÃ©dia, mÃ¡ximo, mÃ­nimo e contagem.
- **Gerencia** exclusÃ£o de transaÃ§Ãµes.

### **ConfigurationService**
- **Gerencia** dinamicamente o tempo da janela estatÃ­stica.

---

## **ğŸ“Œ Arquivos de ConfiguraÃ§Ã£o**
### **1ï¸âƒ£ `application.properties`**
Define:
- Porta do servidor
- NÃ­veis de log
- ConfiguraÃ§Ã£o de observabilidade
- SeguranÃ§a e configuraÃ§Ãµes da aplicaÃ§Ã£o

### **2ï¸âƒ£ `logback-spring.xml`**
Gerencia **formataÃ§Ã£o e nÃ­veis de log** para diferentes ambientes.

### **3ï¸âƒ£ `SwaggerConfig.java`**
Configura a **documentaÃ§Ã£o OpenAPI (Swagger)**.

### **4ï¸âƒ£ `SecurityConfig.java`**
Gerencia **seguranÃ§a** no Spring Security:
- Desabilita CSRF para APIs.
- Permite acesso irrestrito aos endpoints do Swagger.

### **5ï¸âƒ£ `CorsConfig.java`**
Define **polÃ­tica de CORS** para permitir requisiÃ§Ãµes de diferentes origens.

---

## **ğŸ“Œ Observabilidade & Logging**
- **Spring Boot Actuator** fornece:
    - `/actuator/health` â†’ VerificaÃ§Ã£o de integridade do sistema.
    - `/actuator/metrics` â†’ MÃ©tricas da aplicaÃ§Ã£o.
    - `/actuator/prometheus` â†’ MÃ©tricas no formato Prometheus.

---

## **ğŸ“Œ DocumentaÃ§Ã£o da API (Swagger)**
- **Acesse Swagger UI:** [`http://localhost:8080/swagger-ui.html`](http://localhost:8080/swagger-ui.html)
- **DocumentaÃ§Ã£o JSON da API:** [`http://localhost:8080/v3/api-docs`](http://localhost:8080/v3/api-docs)

---

## **ğŸ“Œ ConteinerizaÃ§Ã£o (Docker)**
### **1ï¸âƒ£ Dockerfile**
```dockerfile
FROM openjdk:17-jdk-slim
WORKDIR /app
COPY target/itub3-0.0.1-SNAPSHOT.jar app.jar
ENTRYPOINT ["java", "-jar", "app.jar"]
EXPOSE 8080
```

### **2ï¸âƒ£ ConstruÃ§Ã£o e ExecuÃ§Ã£o**
```sh
# Construir o projeto
mvn clean package -DskipTests

# Criar a imagem Docker
docker build -t itub3-app .

# Executar o container
docker run -d -p 8080:8080 --name itub3-container itub3-app
```

### **3ï¸âƒ£ Parar & Remover o Container**
```sh
docker stop itub3-container
docker rm itub3-container
docker rmi itub3-app
```

---

## **ğŸ“Œ Como Clonar e Executar Localmente**
### **1ï¸âƒ£ Clonar o RepositÃ³rio**
```sh
git clone https://github.com/YOUR_USERNAME/itub3.git
cd itub3
```

### **2ï¸âƒ£ Construir o Projeto**
```sh
mvn clean install -DskipTests
```

### **3ï¸âƒ£ Rodar a AplicaÃ§Ã£o**
```sh
mvn spring-boot:run
```

### **4ï¸âƒ£ Rodar via Docker**
```sh
docker build -t itub3-app .
docker run -d -p 8080:8080 --name itub3-container itub3-app
```

---

## **ğŸ“Œ Testes**
### **Executar Testes UnitÃ¡rios**
```sh
mvn test
```

---

## **ğŸ“Œ Autor e LicenÃ§a**
ğŸ‘¤ **Saulo Capistrano**  
ğŸ“§ Contato: `saulocapistrano@gmail.com`  
ğŸ“„ LicenÃ§a: MIT License

---

**ğŸš€ Pronto para usar a API? Comece agora explorando o Swagger!**

[`http://localhost:8080/swagger-ui.html`](http://localhost:8080/swagger-ui.html)
